define("@widget/LAYOUT/bs-BackgroundCarousel-Component-9d235c21.js",["exports","@widget/LAYOUT/c/bs-_rollupPluginBabelHelpers","@widget/LAYOUT/c/bs-dataAids","@widget/LAYOUT/c/bs-index","@widget/LAYOUT/c/bs-countVCTElement","@widget/LAYOUT/c/bs-headerTreatments","@widget/LAYOUT/c/bs-overlayTypes","@widget/LAYOUT/c/bs-utils","@widget/LAYOUT/c/bs-PortalContainer","@widget/LAYOUT/c/bs-viewDevice"],(function(e,o,t,a,r,p,s,l,i,n){"use strict";(global.PropTypes||guac["prop-types"]).shape({image:(global.PropTypes||guac["prop-types"]).string,video:(global.PropTypes||guac["prop-types"]).string,oWidth:(global.PropTypes||guac["prop-types"]).number,oHeight:(global.PropTypes||guac["prop-types"]).number,alt:(global.PropTypes||guac["prop-types"]).string,coordinates:(global.PropTypes||guac["prop-types"]).shape({x:(global.PropTypes||guac["prop-types"]).number,y:(global.PropTypes||guac["prop-types"]).number}),editedAspectRatio:(global.PropTypes||guac["prop-types"]).string,height:(global.PropTypes||guac["prop-types"]).string,width:(global.PropTypes||guac["prop-types"]).string,left:(global.PropTypes||guac["prop-types"]).string,top:(global.PropTypes||guac["prop-types"]).string,rotation:(global.PropTypes||guac["prop-types"]).string,scale:(global.PropTypes||guac["prop-types"]).number,position:(global.PropTypes||guac["prop-types"]).string,overlayAlpha:(global.PropTypes||guac["prop-types"]).number});const g=(global.PropTypes||guac["prop-types"]).shape({image:(global.PropTypes||guac["prop-types"]).string,oWidth:(global.PropTypes||guac["prop-types"]).number,oHeight:(global.PropTypes||guac["prop-types"]).number,alt:(global.PropTypes||guac["prop-types"]).string,coordinates:(global.PropTypes||guac["prop-types"]).shape({x:(global.PropTypes||guac["prop-types"]).number,y:(global.PropTypes||guac["prop-types"]).number}),editedAspectRatio:(global.PropTypes||guac["prop-types"]).string,height:(global.PropTypes||guac["prop-types"]).string,width:(global.PropTypes||guac["prop-types"]).string,left:(global.PropTypes||guac["prop-types"]).string,top:(global.PropTypes||guac["prop-types"]).string,rotation:(global.PropTypes||guac["prop-types"]).string,scale:(global.PropTypes||guac["prop-types"]).number,position:(global.PropTypes||guac["prop-types"]).string,overlayAlpha:(global.PropTypes||guac["prop-types"]).number}),c=(global.PropTypes||guac["prop-types"]).shape({image:(global.PropTypes||guac["prop-types"]).string,video:(global.PropTypes||guac["prop-types"]).string,oWidth:(global.PropTypes||guac["prop-types"]).number,oHeight:(global.PropTypes||guac["prop-types"]).number,alt:(global.PropTypes||guac["prop-types"]).string,overlayAlpha:(global.PropTypes||guac["prop-types"]).number}),d=(global.PropTypes||guac["prop-types"]).shape({autoplay:(global.PropTypes||guac["prop-types"]).bool,autoplayDelay:(global.PropTypes||guac["prop-types"]).number,transition:(global.PropTypes||guac["prop-types"]).oneOf(["fade","slide"]),type:(global.PropTypes||guac["prop-types"]).oneOf(["imagesOnly","slides"]),dots:(global.PropTypes||guac["prop-types"]).bool,arrows:(global.PropTypes||guac["prop-types"]).bool,slides:(global.PropTypes||guac["prop-types"]).arrayOf((global.PropTypes||guac["prop-types"]).shape({image:g,heroContent:(global.PropTypes||guac["prop-types"]).shape({tagline:(global.PropTypes||guac["prop-types"]).string,tagline2:(global.PropTypes||guac["prop-types"]).string,cta:(global.PropTypes||guac["prop-types"]).object})})),alignmentOption:(global.PropTypes||guac["prop-types"]).string,themeConfig:(global.PropTypes||guac["prop-types"]).shape({height:(global.PropTypes||guac["prop-types"]).string,maxWidthPercent:(global.PropTypes||guac["prop-types"]).number})}),u=((global.PropTypes||guac["prop-types"]).shape({mediaType:(global.PropTypes||guac["prop-types"]).oneOf(["Image","Video","Slideshow"]).isRequired,background:g,video:c,slideshow:d}),({data:e,blur:o,children:t,dataRoute:a,dataAid:r,overlay:s,treatment:l,style:i={},backgroundSize:n,mobileImage:g,mobileSize:c,showOverlay:d})=>{const{image:u,position:b,alt:y,overlayAlpha:h}=e;if(!u)return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,t);const m=l===p.LEGACY_BLUR;let T,w,P=p.generateBackgroundUrl(e,!m),v=n||"cover";m&&(T=p.addImageApiArgs(P,{"fx-bl":"s:30"}),w="cover",v="contain"),o&&(P=p.addImageApiArgs(P,{"fx-bl":"s:90"}));const C={...(b||"").indexOf(" ")>-1?{backgroundPosition:b}:{},...i};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Background,{"data-aid":r,"data-field-id":a,"aria-label":y,section:"overlay",style:C,overlay:s,treatment:l,"data-ht":l,backgroundImage:P,backgroundSize:v,backgroundImage2:T,backgroundSize2:w,mobileImage:g,mobileSize:c,overlayAlpha:d?h:0,imageData:e},t)});u.propTypes={blur:(global.PropTypes||guac["prop-types"]).bool,data:g.isRequired,dataAid:(global.PropTypes||guac["prop-types"]).string,children:(global.PropTypes||guac["prop-types"]).any,overlay:(global.PropTypes||guac["prop-types"]).oneOf([s.CATEGORY,s.PRIMARY,s.NEUTRAL,s.ACCENT,s.NONE]),style:(global.PropTypes||guac["prop-types"]).object,treatment:(global.PropTypes||guac["prop-types"]).oneOf([p.FILL,p.FIT,p.INSET,p.BLUR,p.LEGACY_BLUR]),backgroundSize:(global.PropTypes||guac["prop-types"]).string,mobileImage:(global.PropTypes||guac["prop-types"]).string,mobileSize:(global.PropTypes||guac["prop-types"]).string,dataRoute:(global.PropTypes||guac["prop-types"]).string,showOverlay:(global.PropTypes||guac["prop-types"]).bool},u.defaultProps={blur:!1,dataAid:t.DataAid.BACKGROUND_IMAGE_RENDERED,overlay:s.NONE,showOverlay:!0};class b extends(global.React||guac.react).Component{constructor(...e){super(...e),o._defineProperty(this,"goToSlide",(e,o)=>{o.stopPropagation(),this.props.goToSlide(e)})}render(){const{numSlides:e,selectedIndex:t,editingIndex:a,visible:r,containerId:p}=this.props;if(e<=1)return null;const s={list:{listStyle:"none",padding:0,marginTop:0,marginBottom:p?0:"medium","@md":{marginBottom:p?0:"large"}},listItem:{display:"inline-block",cursor:"pointer"},wrapper:{display:r?"block":"none",position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",zIndex:2}},l=[];for(let r=0;r<e;r++){const e=r===t?(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Dot.Active:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Dot,p=a>=0?{"data-field-id":"slides","data-field-route":"/mediaData/slides/"+r}:{"data-edit-interactive":!0};l.push((global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,o._extends({tag:"li",key:"dot-"+r,style:s.listItem,onClick:this.goToSlide.bind(null,r)},p),(global.React||guac.react).createElement(e,{"data-aid":"SLIDE_SELECTION_DOT_"+r})))}const n=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{tag:"ul",style:s.list},l);return p?(global.React||guac.react).createElement(i.PortalContainer,{containerId:p},n):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:s.wrapper},n)}}b.propTypes={numSlides:(global.PropTypes||guac["prop-types"]).number,selectedIndex:(global.PropTypes||guac["prop-types"]).number,goToSlide:(global.PropTypes||guac["prop-types"]).func,editingIndex:(global.PropTypes||guac["prop-types"]).number,visible:(global.PropTypes||guac["prop-types"]).bool,containerId:(global.PropTypes||guac["prop-types"]).string};class y extends(global.React||guac.react).Component{constructor(e){super(e),o._defineProperty(this,"goToPrevSlide",e=>{e.stopPropagation(),this.props.prevSlide()}),o._defineProperty(this,"goToNextSlide",e=>{e.stopPropagation(),this.props.nextSlide()}),o._defineProperty(this,"handleMatchMedia",e=>{const{viewDevice:o,renderMode:t}=this.props,a=t===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH?"xs"===e.size:n.isDeviceMobile(o);this.state.loaded&&this.state.isMobile===a||this.setState({loaded:!0,isMobile:a})}),this.state={isMobile:!1,loaded:!1}}render(){const{numSlides:e,editingIndex:t,visible:a,containerId:r,mobileContainerId:p}=this.props,{isMobile:s,loaded:l}=this.state;if(e<=1)return null;const n={overlay:{display:a&&l?"flex":"none",justifyContent:"center",position:"absolute","@xs-only":{bottom:0,left:"small",right:"small",marginBottom:"small"},"@sm":{left:0,right:0,top:"calc(50% - 20px)"}}},g=t>=0?{"data-route":"/mediaData"}:{},c=(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX.MatchMedia,{onChange:this.handleMatchMedia}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.SlideshowArrows,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Button.Previous,o._extends({onClick:this.goToPrevSlide,"data-edit-interactive":!0},g)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Button.Next,o._extends({onClick:this.goToNextSlide,"data-edit-interactive":!0},g))));return s&&p?(global.React||guac.react).createElement(i.PortalContainer,{containerId:p},c):r?(global.React||guac.react).createElement(i.PortalContainer,{containerId:r},c):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:n.overlay},c)}}y.propTypes={numSlides:(global.PropTypes||guac["prop-types"]).number,prevSlide:(global.PropTypes||guac["prop-types"]).func,nextSlide:(global.PropTypes||guac["prop-types"]).func,editingIndex:(global.PropTypes||guac["prop-types"]).number,visible:(global.PropTypes||guac["prop-types"]).bool,containerId:(global.PropTypes||guac["prop-types"]).string,mobileContainerId:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,viewDevice:(global.PropTypes||guac["prop-types"]).string};class h extends(global.React||guac.react).Component{componentDidUpdate(){const{goToSlide:e,editingIndex:o}=this.props;"number"==typeof o&&o>=0&&e(o)}render(){return null}}h.propTypes={renderKey:(global.PropTypes||guac["prop-types"]).number,editingIndex:(global.PropTypes||guac["prop-types"]).number,goToSlide:(global.PropTypes||guac["prop-types"]).func};const{Carousel:m}=(global.Core||guac["@wsb/guac-widget-core"]).UX,T=[/mediaData\/slides\/(\d+).*/,/mediaData\/(\d+).*\/image/];class w extends(global.React||guac.react).Component{constructor(){super(...arguments),this.state={currentSlide:0,showText:!1,navOpen:!1},this.afterChange=this.afterChange.bind(this),this.beforeChange=this.beforeChange.bind(this),this.handleNavDrawerOpened=this.handleNavDrawerOpened.bind(this),this.handleNavDrawerClosed=this.handleNavDrawerClosed.bind(this),this.getSlideEditingIndex=this.getSlideEditingIndex.bind(this)}fireTransitionEvent(e){window.dispatchEvent(new CustomEvent("slideshowTransition",{detail:{slide:e,id:this.props.slideshow.themeConfig.slideshowId}}))}afterChange(e){this.setState({currentSlide:e,showText:!1},()=>{setTimeout(()=>{this.setState({showText:!0})},800)}),this.fireTransitionEvent(e)}beforeChange(e){this.fireTransitionEvent(e)}handleNavDrawerOpened(){this.setState({navOpen:!0})}handleNavDrawerClosed(){this.setState({navOpen:!1})}componentDidMount(){!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=(e,o)=>{o=o||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,o.bubbles,o.cancelable,o.detail),t}}();const{slideshow:e,renderMode:o}=this.props,{type:t,themeConfig:{useHeroCarousel:a}}=e;this.afterChange(0),window.addEventListener("NavigationDrawerOpened",this.handleNavDrawerOpened),window.addEventListener("NavigationDrawerClosed",this.handleNavDrawerClosed),o!==(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH||"slides"!==t||a||l.populateHeroContent(e)}componentWillUnmount(){window.removeEventListener("NavigationDrawerOpened",this.handleNavDrawerOpened),window.removeEventListener("NavigationDrawerClosed",this.handleNavDrawerClosed)}getSlideEditingIndex(e=""){const{renderMode:o}=this.props;if(o===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH)return-1;let t=-1;return T.forEach(o=>{const a=e.match(o);a&&a[1]&&(t=parseInt(a[1],10))}),t}render(){const{slideshow:e,renderMode:r,mutatorPath:p,dataRoute:s,viewDevice:i,...n}=this.props,{currentSlide:g,showText:c,navOpen:d}=this.state,{slides:T,type:w,autoplay:P,autoplayDelay:v,transition:C,dots:E,arrows:f,alignmentOption:I,heroIdPrefix:S,themeConfig:x}=e,{maxWidthPercent:A=100,useHeroCarousel:D,dotsContainerId:R,arrowsContainerId:O,mobileArrowsContainerId:U}=x,M=[(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.LAYOUT,(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.DISPLAY].includes(r),L={height:"100%"};let N=!1;const k=T.map((e,p)=>{const s=e||{},i=s.image||{},d=`${t.DataAid.HEADER_SLIDE}_${p}`,b=f?Math.min(A,80):A;let y;if("slides"===w&&!D){let e=!1;!N&&s.tagline&&(e=!0,N=!0),y=(global.React||guac.react).createElement(l.SlideshowHero,{slide:s,index:p,forceH1:e,alignmentOption:I,heroIdPrefix:S,themeConfig:x,renderMode:r,currentSlide:g,showText:c,slideWidthPercent:b,style:L})}return!i.image||p>0&&M?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:p,style:L,dataAid:d},y):(global.React||guac.react).createElement(u,o._extends({key:p,data:{overlayAlpha:a.DEFAULT_HEADER_IMAGE_OPACITY,...i}},n,{style:L,dataAid:d,dataRoute:""}),y)}),B=this.getSlideEditingIndex(p),_={mobile:!1,position:"bottom",editingIndex:B,viewDevice:i,renderMode:r},H=[];E&&H.push({component:b,props:{..._,visible:!d,containerId:R}}),f&&H.push({component:y,props:{..._,visible:!d,containerId:O,mobileContainerId:U}});let X=P;if(M||d)X=!1;else if(r===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT){X=P&&-1===B;const e=g===B?0:Math.random();H.push({component:h,props:{renderKey:e,editingIndex:B}})}const Y=parseFloat(v),z={style:{container:{height:"100%"},containerInner:{height:"100%"},track:{height:"100%"},..."slide"===C?{slide:{opacity:1}}:{}},viewportWidth:"100%",viewportHeight:"100%",height:"100%",slideWidth:"100%",slideHeight:"100%",autoplay:X,autoplaySpeed:Number.isNaN(Y)?7e3:Math.max(1e3*Y,2e3),transition:C,transitionDuration:1e3,infinite:!0,lazyLoad:!1,dots:!1,arrows:!1,draggable:!0,pauseOnHover:!1,afterChange:this.afterChange,beforeChange:this.beforeChange,controls:H};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{height:"100%"}},r===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-field-id":s,style:{position:"absolute",top:0,bottom:0,left:0,right:0}}),(global.React||guac.react).createElement(m,z,k))}}w.propTypes={slideshow:(global.PropTypes||guac["prop-types"]).object,heroTrackId:(global.PropTypes||guac["prop-types"]).string,dataRoute:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string,viewDevice:(global.PropTypes||guac["prop-types"]).string,mutatorPath:(global.PropTypes||guac["prop-types"]).string},e.default=w})),"undefined"!=typeof window&&(window.global=window);
